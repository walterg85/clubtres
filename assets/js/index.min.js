var lang=window.navigator.language.substring(0,2);function fnRegisterUser(){let e=document.querySelectorAll(".needs-validation"),t=!0;if(Array.prototype.slice.call(e).forEach(function(e){e.checkValidity()||(t=!1),e.classList.add("was-validated")}),!t)return!1;let a={_method:"POST",name:$("#inputRegName").val(),last_name:$("#inputRegLastName").val(),email:$("#inputRegEmail").val(),password:$("#inputRegPassword").val()};$.post("core/controllers/user.php",a,function(e){200==e.codeResponse?($("#inputEmail").val($("#inputRegEmail").val()),$("#inputPassword").val($("#inputRegPassword").val()),fnValidateUser(),$("#registerModal").modal("hide")):Swal.fire({position:"top-end",icon:"info",text:e.message,showConfirmButton:!1,timer:3e3})})}function fnRestorePassword(){let e=document.querySelectorAll(".needs-validation-restore"),t=!0;if(Array.prototype.slice.call(e).forEach(function(e){e.checkValidity()||(t=!1),e.classList.add("was-validated")}),!t)return!1;let a={_method:"_RestorePassword",email:$("#inputRestoreMail").val()};$.post("core/controllers/user.php",a,function(e){0==e.data.existe?Swal.fire({position:"top-end",icon:"warning",text:"The user is not registered",showConfirmButton:!1,timer:3e3}):($("#inputRestoreMail").val(""),$("#restoreModal").modal("hide"),Swal.fire({position:"top-end",icon:"success",text:"An email was sent with the league to reset your password",showConfirmButton:!1,timer:3e3}))})}function fnValidateUser(){let e={_method:"VALIDATE",email:$("#inputEmail").val(),password:$("#inputPassword").val()};$.post("core/controllers/user.php",e,function(e){200==e.codeResponse?(localStorage.setItem("logged",!0),window.location.replace("account/index.php")):Swal.fire({position:"top-end",icon:"info",text:e.message,showConfirmButton:!1,timer:3e3})})}function switchLanguage(e){$.post("core/controllers/language.php",{side:"account"},function(t){$(".changeLang").html('<i class="bi bi-globe2"></i> '+t[e].buttonText);let a=t[e].login;$("#punchLine").html(a.punchLine),$("#inputEmail").attr("placeholder",a.inpuitmail),$("#inputPassword").attr("placeholder",a.inputPass),$(".lblCheck").html(`<input type="checkbox" value="remember-me"> ${a.inputCheck}`),$("#btnLogin").html(a.button+' <i class="bi bi-box-arrow-in-right"></i>'),$(".lblNewAccount").html(a.link),$(".footerNote").html(a.footerNote),$("#inputRestoreMail").attr("placeholder",a.inputRestoreMail),$("#btnRestore").html(a.btnRestore),$("#exampleModalLabel").html(a.modalTitle),$("#inputRegName").attr("placeholder",a.mdlInputName),$("#inputRegLastName").attr("placeholder",a.mdlInputLastName),$("#inputRegEmail").attr("placeholder",a.mdlInputMail),$("#inputRegPassword").attr("placeholder",a.mdlInputPass),$("#btnRegister").html(a.mdlBtn1),$(".btnMdlClose").html(a.mdlBtn2),document.title=a.pageTitle,$(".lblChangepassword").html(a.lblChangepassword)})}$(document).ready(function(){$("#btnRegister").on("click",fnRegisterUser),$("#btnRestore").click(fnRestorePassword),$("#btnLogin").on("click",fnValidateUser),$("#inputPassword").keypress(function(e){13==e.which&&fnValidateUser()}),localStorage.getItem("logged")&&window.location.replace("account/index.php"),localStorage.getItem("currentLag")?lang=localStorage.getItem("currentLag"):localStorage.setItem("currentLag",lang),$(".changeLang").click(function(){"es"==localStorage.getItem("currentLag")?(localStorage.setItem("currentLag","en"),lang="en"):(localStorage.setItem("currentLag","es"),lang="es"),switchLanguage(lang)}),switchLanguage(lang)});